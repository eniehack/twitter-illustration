{"version":3,"file":"content-script.js","mappings":";;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;ACPA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sources":["webpack://chrome-extension/./src/request.ts","webpack://chrome-extension/webpack/bootstrap","webpack://chrome-extension/webpack/runtime/define property getters","webpack://chrome-extension/webpack/runtime/hasOwnProperty shorthand","webpack://chrome-extension/webpack/runtime/make namespace object","webpack://chrome-extension/./src/content-script.ts"],"sourcesContent":["export const sendMessage = (request) => new Promise((resolve) => {\n    chrome.runtime.sendMessage(request, (response) => {\n        resolve(response);\n    });\n});\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { sendMessage } from \"./request\";\nlet registeredTweets = [];\nconst callback = () => {\n    const url = location.href;\n    if (!url.includes(\"/status\")) {\n        return;\n    }\n    // add a plus button\n    const navigationQuery = \".css-1dbjc4n.r-k4xj1c.r-18u37iz.r-1wtj0ep\";\n    const navigation = document.querySelector(navigationQuery);\n    if (!navigation) {\n        return;\n    }\n    const className = \"illustration-plus\";\n    const existingPlusButtons = navigation.getElementsByClassName(className);\n    if (existingPlusButtons.length > 0) {\n        return;\n    }\n    const id = url.replace(/^https:\\/\\/.*\\/status\\//, \"\").replace(/\\/.*$/, \"\");\n    const isAlreadyStored = registeredTweets.includes(id);\n    const plusButton = document.createElement(\"div\");\n    plusButton.className = \"illustration-plus\";\n    plusButton.innerHTML = isAlreadyStored ? \"✓\" : \"+\";\n    if (!isAlreadyStored) {\n        const onClickPlusButton = () => __awaiter(void 0, void 0, void 0, function* () {\n            const response = yield sendMessage({\n                type: \"add-tweet\",\n                body: { id },\n            });\n            if (response.succeeded) {\n                registeredTweets.push(id);\n                plusButton.innerHTML = \"✓\";\n                plusButton.removeEventListener(\"click\", onClickPlusButton);\n            }\n            else {\n                alert(`Failed: ${response.message}`);\n            }\n        });\n        plusButton.addEventListener(\"click\", onClickPlusButton);\n    }\n    navigation.appendChild(plusButton);\n};\nwindow.addEventListener(\"load\", () => __awaiter(void 0, void 0, void 0, function* () {\n    // get stored tweets\n    const storedTweetsResponse = yield sendMessage({\n        type: \"get-tweets\",\n    });\n    if (storedTweetsResponse.succeeded) {\n        registeredTweets = storedTweetsResponse.body.map((line) => line.id);\n    }\n    // register a observer\n    const registerObserver = () => {\n        const timeline = document.querySelector(\"#react-root\");\n        if (timeline) {\n            const observer = new MutationObserver(callback);\n            observer.observe(timeline, { childList: true, subtree: true });\n            callback();\n        }\n        else {\n            setTimeout(registerObserver, 100);\n        }\n    };\n    registerObserver();\n}));\n"],"names":[],"sourceRoot":""}